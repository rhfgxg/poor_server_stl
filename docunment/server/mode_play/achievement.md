——# 成就/任务设计文档

# 配置文件
成就配置文件使用lua格式，存放在`config/achievement.lua`文件中。

## 关键数据解释：
以成就：任意职业等级到达5级，奖励1000金币为例

下一级成就id：
	当成就是一个系列时，需要填写下一个成就的id
	下一级成就id是一个数字，表示当前成就完成后，系列的下一个成就的id
	如果没有下一个成就，填写0

成就类型：
    例如：等级到5级，等级到10级。属于相同类型的两个不同成就
	相同类型的成就：目标值不同，但是目标值的数量必须相同，描述也应该相同
	使用数字表示对应的类型：
	- 1: 玩家等级

成就描述：
	成就描述是一个字符串，后面建立多语言表后，改为对应的id

目标值（校验参数）：
	目标值是一个数字（5级），与成就类型对应，表示玩家需要达到成就所需的条件
	特殊类型示例：
		职业a到达等级5级：需要两个目标值，一个是职业id，一个是等级，但是只需要一个进度值

进度值（校验值）：
	进度值是一个数字（可以是1级，2级），与目标值对应，表示玩家当前的进度
	
奖励：
	奖励是一个list，里面包含多个奖励(使用 ; 分隔)，每个奖励是一个table，包含两个字段(使用 : 分隔)：
	item_id:number;item_id2:number2
	item_id：奖励的物品id
	number：奖励的数量

## 策划表示例
表格格式：数值全部使用文本格式

成就表
|:--|:--|:--|:--|:--|:--|
|成就id|下一级成就id|成就类型|成就描述|目标值|奖励|
|1|2|1|等级到达5级|5|1:1000|
|2|0|1|等级到达10级|10|1:2000|

成就类型表：纯策划表，不进行代码实现
|:--|:--|:--|:--|:--|
|成就类型id|类型描述|目标值描述|进度值描述|备注|
|1|任意职业等级到达a级|等级a|等级a|无|
|2|a职业等级到达b级|职业a等级b|等级b|无|

每次修改策划表之后，都需要使用脚本`tools/achievement.py`更新对应的配置文件
本地测试生效后，需要将`config/achievement.lua`文件上传到服务器，并调用`reload_achievement`接口进行热更新

# 代码实现
成就在玩家创建时，根据配置文件初始化，需要进行成就更新时进行校验