# 返回总览
项目文件及其他格式列表：
[layout.md](layout.md)


# 序言
本文档只写格式和规范，并做出范例，详细的规范描述及解释请参考其他文档
当一条规范关联不同规范时，会重复列出，以便查阅
本文档脱胎与腾讯c++代码安全指南，腾讯 c++代码规范，并进行了修改和补充（不会列出）

腾讯c++代码安全指南（2024年12月31日整理，后续更新可能不及时）
https://github.com/Tencent/secguide/blob/main/C%2CC%2B%2B%E5%AE%89%E5%85%A8%E6%8C%87%E5%8D%97.md

腾讯 c++代码规范（2007版v1.0）
https://pytlab.github.io/assets/files/%E8%85%BE%E8%AE%AFC++%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83.pdf


# 代码格式
## 缩进
- 缩进应使用tab，一个tab等于4个空格

## 换行
- 换行符使用LF
- 不对代码长度做出限制
- 大括号独占一行（lambda表达式另有规定）
- lambda表达式：前大括号不换行，后大括号独占一行，代码块只有一行时也需要换行
- 使用大括号进行初始化：前大括号不换行，后大括号独占一行，代码块只有一行时也需要换行
- 构造函数成员初始化列表的冒号后换行，列表中的逗号后换行
- 变量或函数较短时可以注释在行尾
- 变量或函数教长时可以注释在上一行

## 类
- 在类定义前，注释类的功能
- 类名使用首字母大写的大驼峰命名法，可以使用下划线分割单词
- 类继承时，冒号后不换行
- 类继承时，父类超过三个，换行，每个父类独占一行
- 定义文件内，类的定义顺序为：public、protected、private
- 类的成员函数定义在前，成员变量定义在后
- 成员函数与成员变量使用多个权限进行区分（private函数与变量使用两个 private区分）
- 相似功能的函数放在一起，而不以名称区分
- 相似功能的变量放在一起，而不以名称区分
- 不同功能的成员之间空一行
- protobuf 生成的类名不做修改
- protobuf 生成的 grpc服务接口名 与 proto 文件接口名相同（首字母大写的大驼峰命名法）
- 不同参数之间使用空格分隔
- 构造函数：参数名与成员名冲突时，参数名后加下划线区分
- 类定义文件中所有需要的头文件，都放在声明文件
- 类定义文件中，只添加对应的声明头文件，不添加其他头文件
- 类内使用成员时，使用 this-> 成员名（变量，函数等）

### 引用类
include时，自定义文件("") 在前，第三方库文件(<>) 在后
自定义文件 应做出简单解释

## switch
每个 case 都要添加 {}，并换行

# 类型选择
# proto文件
- 遵守大括号换行规则
- 尽量不使用string，而是使用bytes（proto的string是utf-8，与c++会造成冲突）
- map的键类型使用string（无法使用bytes）
- 字段值从1开始，可以改变字段值，但不建议


## 注释
### 注释行与注释块选择
- 注释块 /**/，注释行 //
- 大量相关注释应当使用注释块
- 对于复杂逻辑，函数解释应当使用注释块

### 类，函数，变量注释
#### 类声明
- 类声明前，应该列出类的简单解释
- 类功能的简单解释，应该放在类定义上一行
- 类内部逻辑，详细功能解释，成员变量解释应该放在类定义内部第一行，使用注释块进行折叠
- 在类声明时，应该列出类的成员变量的简单解释

#### 类定义
- 类的构造，析构，符号重载，类型转换等函数应该放在类定义的开始位置
- 使用 /******/ 对不同功能的函数进行分区

#### 函数
- 函数声明时，应该列出参数的简单解释（定义长的 放在上一行，短的 放在行尾）
- 函数定义时，应该列出参数的简单解释。放在函数定义上一行（默认析构和构造函数可以省略）
- 函数内部逻辑，详细功能解释，参数解释应该放在函数内部第一行，使用注释块进行折叠

### 其他注释规范
- 对于重复度较高的代码，可以选择一处进行注释，其他地方应当指出这个注释的位置（格式：请参考 ***/*** 文件 *** 函数）
- 引用自定义头文件时，include处 应做出头文件的简单解释