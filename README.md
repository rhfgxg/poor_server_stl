# poor_server_stl
c++（无qt库）的服务端版本

本项目用来尝试使用c++标准库重构qt版本的服务端
原项目使用 QT库，在面试和实际工作中发现，很少会使用 QT库作为服务器框架
所以决定使用本项目重构原代码，实现并学习下面功能：
1. 分布式服务器，多线程
2. 服务器之间通信和调用：RPC
3. 客户端与服务器，服务器之间通信协议：protobuf
4. 使用分层架构，多模块设计：各模块独享一个 CMakeLists文件，可以独立编译启动，通过顶级 CMakeLists文件管理
5. 使用对象池管理项目中需要频繁创建删除的对象
6. 结合lua语言实现配置文件等的热更新

# 项目中使用的第三方库
所有第三方库文件都放在 vcpkg_installed/x64-windwos 文件夹下（需要使用vcpkg安装后，自动生成）

## 第三方库列表
仅包含直接使用的库列表

### boost：网络库

### mysql-connector-cpp：mysql库
使用mysqlx协议，所以链接数据库的端口是33060

### nlohmann-json：json操作库

### protobuf：protobuf库：客户端与服务器，服务器之间的通信协议


# 各服务器模块功能
## 中心服务器
主要负责管理所有服务器，包括：服务器启停，活动，服务器之间的通信，监控等，还负责全服消息的发送

## 网关服务器
负责处理客户端的所有请求，包括：登录，注册，聊天，好友等
然后转发给相应服务器进行处理

## 逻辑服务器
负责处理所有游戏逻辑，包括：战斗，任务，商城等

## 登录服务器
负责处理登录，注册等请求

## 数据库服务器
负责数据库的所有操作

## 日志服务器
负责记录所有服务器的日志，包括：错误日志，警告日志，调试日志等

## 聊天服务器
负责处理聊天请求

## 应用场景
服务器管理：
中心服务器启动，然后启动其他服务器，中心服务器负责监控其他服务器的状态，并写入日志

客户端登录：
客户端发出请求
网关服务器接收请求，然后向中心服务器索要登录服务器的信息
中心服务器，根据负载情况，返回登录服务器的信息给网关服务器
数据转发给登录服务器
登录服务器处理请求，根据数据内调用服务器的地址，直接返回结果给网关服务器
网关服务器返回结果给客户端