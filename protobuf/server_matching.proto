// 匹配服务器
syntax = "proto3";
package rpc_server;

// 匹配服务
service MatchingServer
{
    rpc MatchPlayer(MatchPlayerReq) returns (stream MatchPlayerRes);  // 玩家匹配请求
    rpc CancelMatch(CancelMatchReq) returns (CancelMatchRes);  // 取消匹配请求
}

// 玩家匹配请求消息
message MatchPlayerReq
{
    int32 player_id = 1;
}

// 玩家匹配响应消息
message MatchPlayerRes
{
    bool success = 1; // 是否加入队列/匹配成功
    bytes message = 2;
    int32 status = 3; // 0: 加入队列成功, 1: 匹配成功, 2: 匹配失败/取消
    int32 match_id = 4; // 匹配成功后的对战ID
    bytes opponent_info = 5; // 对手信息
}

// 取消匹配请求消息
message CancelMatchReq
{
    int32 player_id = 1;
}

// 取消匹配响应消息
message CancelMatchRes
{
    bool success = 1;
    bytes message = 2;
}

