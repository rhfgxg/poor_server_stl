// Skynet 卡牌收藏服务协议
// 处理卡牌收藏、卡组管理等

syntax = "proto3";
package skynet_proto;

import "skynet_common.proto";

// ==================== 收藏请求/响应 (700-749) ====================

// 获取收藏列表请求 (type = 700)
message GetCollectionRequest {
    string player_id = 1;
    string class_filter = 2;    // 可选：按职业过滤
    string rarity_filter = 3;   // 可选：按稀有度过滤
}

// 获取收藏列表响应 (type = 800)
message GetCollectionResponse {
    bool success = 1;
    repeated CollectionCard cards = 2;
    int32 total_cards = 3;
    int32 unique_cards = 4;
}

// 收藏中的卡牌
message CollectionCard {
    string card_id = 1;
    int32 count = 2;            // 拥有数量
    bool is_golden = 3;
    int32 golden_count = 4;
}

// 分解卡牌请求 (type = 701)
message DisenchantCardRequest {
    string player_id = 1;
    string card_id = 2;
    int32 count = 3;
    bool is_golden = 4;
}

// 分解卡牌响应 (type = 801)
message DisenchantCardResponse {
    bool success = 1;
    string message = 2;
    int32 dust_gained = 3;
    int32 total_dust = 4;
}

// 合成卡牌请求 (type = 702)
message CraftCardRequest {
    string player_id = 1;
    string card_id = 2;
    bool is_golden = 3;
}

// 合成卡牌响应 (type = 802)
message CraftCardResponse {
    bool success = 1;
    string message = 2;
    int32 dust_spent = 3;
    int32 remaining_dust = 4;
}

// ==================== 卡组请求/响应 (750-799) ====================

// 获取卡组列表请求 (type = 750)
message GetDecksRequest {
    string player_id = 1;
}

// 获取卡组列表响应 (type = 850)
message GetDecksResponse {
    bool success = 1;
    repeated Deck decks = 2;
}

// 创建卡组请求 (type = 751)
message CreateDeckRequest {
    string player_id = 1;
    string name = 2;
    string class_type = 3;
    repeated string card_ids = 4;
}

// 创建卡组响应 (type = 851)
message CreateDeckResponse {
    bool success = 1;
    string message = 2;
    Deck deck = 3;
}

// 更新卡组请求 (type = 752)
message UpdateDeckRequest {
    string player_id = 1;
    string deck_id = 2;
    string name = 3;
    repeated string card_ids = 4;
}

// 更新卡组响应 (type = 852)
message UpdateDeckResponse {
    bool success = 1;
    string message = 2;
    Deck deck = 3;
}

// 删除卡组请求 (type = 753)
message DeleteDeckRequest {
    string player_id = 1;
    string deck_id = 2;
}

// 删除卡组响应 (type = 853)
message DeleteDeckResponse {
    bool success = 1;
    string message = 2;
}

// 导入卡组请求 (type = 754)
message ImportDeckRequest {
    string player_id = 1;
    string deck_code = 2;       // 卡组代码
}

// 导入卡组响应 (type = 854)
message ImportDeckResponse {
    bool success = 1;
    string message = 2;
    Deck deck = 3;
    repeated string missing_cards = 4;  // 缺少的卡牌
}

// 导出卡组请求 (type = 755)
message ExportDeckRequest {
    string player_id = 1;
    string deck_id = 2;
}

// 导出卡组响应 (type = 855)
message ExportDeckResponse {
    bool success = 1;
    string deck_code = 2;
}
