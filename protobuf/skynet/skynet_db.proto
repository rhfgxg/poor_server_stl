// Skynet 数据库服务协议
// Skynet 内部通过 C++ Gateway 转发到 DB Server
// 消息类型与 C++ common.proto ServiceType 保持一致

syntax = "proto3";
package skynet_proto;

// ==================== 数据库消息 ====================
// 消息类型编号与 C++ ServiceType 对应

// 创建数据请求 (ServiceType: REQ_DB_CREATE = 20)
message DBCreateRequest {
    string database = 1;
    string table = 2;
    map<string, string> data = 3;
}

// 创建数据响应 (ServiceType: RES_DB_CREATE = 21)
message DBCreateResponse {
    bool success = 1;
    string message = 2;
}

// 读取数据请求 (ServiceType: REQ_DB_READ = 22)
message DBReadRequest {
    string database = 1;
    string table = 2;
    map<string, string> query = 3;
}

// 读取数据响应 (ServiceType: RES_DB_READ = 23)
message DBReadResponse {
    bool success = 1;
    string message = 2;
    repeated DBResult results = 3;
}

// 数据库查询结果
message DBResult {
    map<string, string> fields = 1;
}

// 更新数据请求 (ServiceType: REQ_DB_UPDATE = 24)
message DBUpdateRequest {
    string database = 1;
    string table = 2;
    map<string, string> query = 3;
    map<string, string> data = 4;
}

// 更新数据响应 (ServiceType: RES_DB_UPDATE = 25)
message DBUpdateResponse {
    bool success = 1;
    string message = 2;
}

// 删除数据请求 (ServiceType: REQ_DB_DELETE = 26)
message DBDeleteRequest {
    string database = 1;
    string table = 2;
    map<string, string> query = 3;
}

// 删除数据响应 (ServiceType: RES_DB_DELETE = 27)
message DBDeleteResponse {
    bool success = 1;
    string message = 2;
}
